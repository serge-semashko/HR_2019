tab_ftediv.cfg

[comments]
descr=A: Таб "RND" разработка

input=none
parents=
author:Семашко
[end]


[parameters]
LOG=ON
[end]

[report]
    +++++++ начальная строка и кол-во строк на странице по умолчанию ++++ ??
    $SET_PARAMETERS  rpp=9999999  
    $SET_PARAMETERS srn=1; rpp=1;  ??!srn|!rpp
    $SET_PARAMETERS text_in=Проба пера
    $SET_PARAMETERS lang=ru-en
    $INCLUDE [translate]
    <div id="ftedivTabFilters">
        <table border=0 cellpadding=5>
            <input type="hidden" name="srn" value="#srn#">
            <input type="hidden" name="srt" value="#srt#">
            <input type="hidden" name="desc" value="#desc#">
        <tr border-top=2>
            <td class="label nowrap" nowrap>
                Тема: 
            </td><td>
                    <select name="selected_topic" class=norm>
                    <option value="">любая</option>
            </td>
        </tr><tr>
                <td class="label nowrap" nowrap colspan=0>Русский:</td><td>
                    <input type="text"         name="text_rus" value="#text_in#"  >
                </td>
        </tr><tr>
                <td class="label nowrap" size=900px colspan=0 nowrap>Английский:</td><td>
                    <input type="text"         name="text_eng" value="#text_out#"  >
                </td>
        </tr><tr>

            <td>
                <input type="button" style="width:80; height:30" value="Перевод" onClick="showDivisions()">
            </td>
    </table>
     </br>
    </div>

    <div id="content_table">
       
    </div>
    </center> ??


    <script>

        var doSubmit=function(){
            
            
        }
        function showDivisions(){
        }

    </script>

     $USE_DB ORA
     $GET_DATA [get ora]
     $LOG2 cnty #cnty#
     $USE_DB default

[end]
[get ora]
    select count(C1_SOSTAV) as cnty from adb.nica_1c_fact_22
[end]
[translate]
        $JS{
            function utf8_decode (aa) {
                var bb = '', c = 0;
                for (var i = 0; i < aa.length; i++) {
                    c = aa.charCodeAt(i);
                    if (c > 127) {
                        if (c > 1024) {
                            if (c == 1025) {
                                c = 1016;
                            } else if (c == 1105) {
                                c = 1032;
                            }
                            bb += String.fromCharCode(c - 848);
                        }
                    } else {
                        bb += aa.charAt(i);
                    }
                }
                return bb;
            } 
            function fixedEncodeURIComponent(str) {
              return encodeURIComponent(str).replace(/[!'()*]/g, function(c) {
                return '%' + c.charCodeAt(0).toString(16);
              });
            }

        $JS}
        $SET_PARAMETERS token=trnsl.1.1.20191225T214637Z.70e877a967974c76.65880b0aa066226a077346596774c28736fabd41
        $SET_PARAMETERS URL_RESPONCE_PARAM=text_out
        $JS setPrm('text_in_enc',fixedEncodeURIComponent(prm('text_in')));
        $SET_PARAMETERS URL=https://translate.yandex.net/api/v1.5/tr.json/translate?text=#text_in_enc#&lang=#lang#&key=#token#
        $LOG2 #URL#
        $GET_URL #URL#
        $JS{
            var txt = prm('text_out');
            var obj = {};
            setPrm('text_en','');
            try {
                obj = JSON.parse(txt);
                var txt = obj['text'];
                setPrm('text_out',txt);
            } finally {
            }
        $JS}

[end]
